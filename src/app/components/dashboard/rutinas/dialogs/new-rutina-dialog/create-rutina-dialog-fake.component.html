<div style="height: 100%; width: 100%;" class="containerPadre" (click)="closeDialog($event)" *ngIf="!isSmallScreen">

  <div class="slide-in-fwd-center" [ngClass]="{'slide-out-bck-center': closeAnimation}" style="width: 915px; height: 70vh; display: flex; justify-content: center; align-items: center;" (click)="handleClickEnComponentePequeno($event)">
    <div class="containerHijo" style="width: 600px; display: block; overflow-y: auto; overflow-x: hidden; z-index: 1;">

      <div *ngIf="error.e" [class]="error.e ? 'errorMsg' : 'errorMsgClose' " style="z-index: 0; background-color: #fc3737ad; width: 525px; min-height: 35px; height: fit-content; border-radius: 10px ; position: absolute; top: -35px; left: 30px; justify-content: start; align-items: center; padding-left: 15px; padding-top: 10px;">
        <span style="color: #f7f7f7; font-weight: 500; font-size: large;">{{error.msg}}</span>
      </div>

      <div style="width: 100%; height: 50px; align-items: center; margin-left: 20px; display: flex; font-size: large; justify-content: space-between;">
        <div style="width: 75%; display: flex; justify-content: space-between; align-items: center;">
          <div>Nueva Rutina</div>
          <div *ngIf="dayToAsignNewRutina === ''" style="color: #410c0c; font-weight: 600;">Error</div>
          <div *ngIf="dayToAsignNewRutina != ''" style="color: #0c3641; font-weight: 500;">{{dayToAsignNewRutina}}</div>
        </div>
        <div style="width: 25%; margin-top: 10px;">
          <button mat-flat-button matTooltip="Crear Rutina" type="submit" (click)="ingresar()" *ngIf="todo.length >= 1 && crearNuevoC === 0" style="background-color: #1cbe1cad;">Aceptar</button>
        </div>
      </div>

      <br>

      <div style="display: block; padding-left: 20px; padding-right: 20px; width: 100%;">
        <form [formGroup]="form" (ngSubmit)="ingresar()" style="display: block; justify-content: center; height: 100%; align-items: center; width: 90%;">

          <div style="width: 100%;">
            <!--<mat-form-field style="width: 60%;">
              <mat-label>Nombre de la rutina</mat-label>
              <input type="text" autofocus matInput formControlName="nombre">
            </mat-form-field>

            <mat-form-field style="width: 38%; margin-left: 10px;" *ngIf="form.get('grupoMuscular')?.value.name !== 'Agregar'">
                <mat-label style="font-size: small;">Grupo Muscular</mat-label>
                <mat-select formControlName="grupoMuscular" name="grupoMuscular">
                  <mat-option *ngFor="let m of tiposConfirmattion" [value]="m">{{m.name}}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field style="width: 38%; margin-left: 10px; position: relative; top: -18px; " *ngIf="form.get('grupoMuscular')?.value.name === 'Agregar' ">
              <mat-label style="font-size: small;">Nuevo Grupo Muscular</mat-label>
              <div style="display: flex; align-items: start; width: 100%;">
                <mat-label style="font-size: small;"></mat-label>
                <button mat-icon-button (click)="cancelarConvenio()" class="butonClose">
                  <mat-icon>clear</mat-icon>
                </button>
              </div>
              <input matInput formControlName="newgrupoMuscular" type="text" name="newgrupoMuscular">
            </mat-form-field>
            -->
          </div>

        </form>

        <!-- #todoList="cdkDropList"
          [cdkDropListData]="todo"
          [cdkDropListConnectedTo]="[doneList]"-->
        <div style="height: fit-content;min-height: 45vh; width: 88%; background-color: #eeeeee4d; padding: 15px; display: flex; margin-bottom: 10px; border-radius: 10px; justify-content: space-between; align-items: top;"
        #todoList="cdkDropList"
        [cdkDropListData]="todo"
        [cdkDropListConnectedTo]="[originList]"
        cdkDropList (cdkDropListDropped)="onDropContainer($event)">

        <div *ngIf="todo.length === 0" style="margin-top: 70px; margin-left: 150px;">
          <img src="/assets/img/klipartz.com.png" style="height: 150px; opacity: 0.5;" alt="">
          <span style="color: #474b4e93; margin: 5px; font-size: medium;display: block; text-align: center;">Arrastra los ejercicios para comenzar a crear tu rutina</span>
        </div>

        <div style="width: 50%;"
          cdkDropList
          #leftList="cdkDropList"
          [cdkDropListData]="todoLeft"
          [cdkDropListConnectedTo]="[rigthList]"
          class="example-list"
          (cdkDropListDropped)="dropInside($event)">
          <div *ngFor="let item of todoLeft; let izq = index" [ngStyle]="getBoxShadow(item)" cdkDrag [class]="{ 'estiloLibreCir': item.nombre === 'c1ecu1t029092005' ,'carExcerciseList':crearNuevoC === 0 && item.nombre != 'c1ecu1t029092005', 'carExcerciseListCircuito':crearNuevoC != 0 && (!item.series || +item.series < 100000), 'compactTarjet': findItemCirtuico(item) }"  style="position: relative; z-index: 1;"
          (click)="checkNewCircuito(item, 0, izq)">

            <!-- EJERCICIO POR DEFECTO -->
            <div *ngIf="item.nombre != 'c1ecu1t029092005' ">
              <div style="display: flex;">
                <span style="width: 100%;">
                  {{item.nombre}}
                </span>
                <button *ngIf="crearNuevoC === 0" mat-icon-button matTooltip="Eliminar ejercicio" class="small-button" (click)="deleteExcercise(0, izq, item)">
                  <mat-icon>close</mat-icon>
                </button>
              </div>
              <div *ngIf="crearNuevoC === 0" style="width: 100%; display: flex; justify-content: space-between;">
                <div style="display: flex; position: relative; width: 40%; height: 80px; margin: 0; padding: 0; z-index: 2;" class="imgCardAnim"> <!-- [class]="{'imgCardAnim':crearNuevoC != 0}" -->
                  <img [src]="item.url ? item.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; height: 100%; z-index: 1; border-radius: 5px;"/>
                </div>

                <div style="display: block; position: relative; width: 57%; height: 80px; margin: 0; padding: 0; justify-content: center; align-items: center; z-index: 1;">
                  <div class="form__group field">
                    <input type="number" ngModel [(ngModel)]="item.series" class="form__field" placeholder="Series" name="Series" id='Series'/>
                    <label for="Series" class="form__label">Series</label>
                  </div>
                  <div class="form__group field" style="margin-top: 12px;">
                    <input type="number" ngModel [(ngModel)]="item.reps" class="form__field" placeholder="Reps" name="Reps" id='Reps' required />
                    <label for="Reps" class="form__label">Reps</label>
                  </div>
                </div>
              </div>

              <div *ngIf="crearNuevoC != 0" style="width: 100%; display: flex; justify-content: center;">
                <div style="display: flex; position: relative; width: 100%; height: 80px; margin: 0; padding: 0; z-index: 2; justify-content: center;"> <!-- [class]="{'imgCardAnim':crearNuevoC != 0}" -->
                  <img [src]="item.url ? item.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; max-width: 100px; height: 100%; z-index: 1; border-radius: 5px;"/>
                </div>
              </div>

              <div style="position: relative; bottom: 0; left: 0;">
                <div style="z-index: 2; width: 30px; padding-top: 15px;padding-left: 10px; justify-content: center; align-items: center; height: 30px; border-radius: 0 50px 0 5px; position: absolute; bottom: 0; left: 0;" [style.background-color]=" findItemCirtuico(item) ? colorSelect : 'rgba(61, 173, 39, 0.856)'">
                  <span style="color: #ebebeb;font-weight: 900;">{{findItemCirtuico(item) ? findIndexCircuitoNew(item)+1 : getNumberExcercise(item)}}</span>
                </div>
              </div>
            </div>

            <!--  EJERCICIO CIRCUIO  -->
            <div *ngIf="item.nombre === 'c1ecu1t029092005' " [style.opacity]="crearNuevoC != 0 ? 0.5 : 1.0" style="display: block; border-radius: 5px; padding: 15px; width: 190px; height: fit-content; min-height: 120px;" [style.background-color]="item.description">
              <div style="position: relative; top: 0; right: 0;">
                <div style="z-index: 2; width: 30px; padding-top: 5px;padding-left: 20px; justify-content: center; align-items: center; height: 30px; border-radius: 5px 0px 0px 50px; position: absolute; top: -15px; right: -15px;" [style.background-color]="item.description">
                  <span style="color: #ffffff;font-weight: 900;">{{getNumberExcercise(item)}}</span>
                </div>
              </div>

              <div style="margin-left: 15px; margin-bottom: 15px;">
                <span><strong>Series del circuito</strong></span>
                <div style="display: flex; width: 100%;">
                  <button style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #04728d;" >-</button>
                  <input ngModel [(ngModel)]="item.reps" style="margin-right: 3px; width: 50%; background-color: #ebebeba9; border-width: 0 0 3px 0; " type="number">
                  <button style="border-radius: 8px; color: #ebebeb; border: none; background-color: #04728d;">+</button>
                </div>
              </div>

              <div *ngFor="let ejercicio of isPropertyArray(item), let indiceCir = index" style="width: 200px; height: 120px; border-color: #0c3641;">
                <div style="display: flex;">
                  <span style="width: 100%; margin: 2px;">

                    <strong>{{ejercicio.nombre}}</strong>
                  </span>
                  <button [disabled]="crearNuevoC != 0" style="margin-top: 5px;" mat-icon-button matTooltip="Eliminar ejercicio" class="small-button" (click)="deleteExcerciseCir(0,item,indiceCir)"><mat-icon>close</mat-icon></button>
                </div>
                <div style="width: 100%; display: flex; justify-content: end;">
                  <div style="width: 15%; display: block; height: 80px; margin-right: 10px;">
                    <button [disabled]="crearNuevoC != 0" (click)="moverEjerCircu(-1,indiceCir, item)" matTooltip="Subir ejercicio" class="reOrderButonCir"><mat-icon style="color: #ffffff;">arrow_upward</mat-icon></button>
                    <button [disabled]="crearNuevoC != 0" (click)="moverEjerCircu(1,indiceCir, item)" matTooltip="Bajar ejercicio" class="reOrderButonCir"><mat-icon style="color: #ffffff;">arrow_downward</mat-icon></button>
                  </div>
                  <div style="display: flex; position: relative; width: 40%; height: 80px; margin: 0; padding: 0; z-index: 2;" class="imgCardAnim"> <!-- [class]="{'imgCardAnim':crearNuevoC != 0}" -->
                    <img [src]="ejercicio.url ? ejercicio.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; height: 100%; z-index: 1; border-radius: 5px;"/>
                    <div style="position: absolute; bottom: 0; left: 0;">
                      <div style="z-index: 2; width: 30px; padding-top: 15px;padding-left: 10px; justify-content: center; align-items: center; height: 30px; border-radius: 0 50px 0 5px; position: absolute; bottom: 0; left: 0;" [style.background-color]="item.description">
                        <span style="color: #ebebeb;font-weight: 900;">{{indiceCir+1}}</span>
                      </div>
                    </div>
                  </div>

                  <div style="display: block; position: relative; width: 38%; height: 80px; margin-left: 5px; padding: 0; justify-content: center; align-items: center; z-index: 1;">
                    <div class="form__group field" style="margin-top: 12px;">
                      <input [disabled]="crearNuevoC != 0" type="number" [(ngModel)]="ejercicio.reps"  class="form__field" placeholder="Reps" name="Reps" id='Reps' required />
                      <label for="Reps" class="form__label">Reps</label>
                    </div>
                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>
        <div style="width: 50%;"
          cdkDropList
          #rigthList="cdkDropList"
          [cdkDropListData]="todoRight"
          [cdkDropListConnectedTo]="[leftList]"
          class="example-list"
          (cdkDropListDropped)="dropInside($event)">

          <div *ngFor="let item of todoRight; let der = index" [ngStyle]="getBoxShadow(item)" cdkDrag [class]="{ 'estiloLibreCir': item.nombre === 'c1ecu1t029092005' ,'carExcerciseList':crearNuevoC === 0 && item.nombre != 'c1ecu1t029092005', 'carExcerciseListCircuito':crearNuevoC != 0 && (!item.series || +item.series < 100000), 'compactTarjet':findItemCirtuico(item)}"  style="position: relative; z-index: 1;"
            (click)="checkNewCircuito(item, 1, der)">

            <!-- EJERCICIO POR DEFECTO -->
            <div *ngIf="item.nombre != 'c1ecu1t029092005'">
              <div style="display: flex;">
                <span style="width: 100%;">
                  {{item.nombre}}
                </span>
                <button *ngIf="crearNuevoC === 0" mat-icon-button matTooltip="Eliminar ejercicio" class="small-button" (click)="deleteExcercise(1,der, item)"><mat-icon>close</mat-icon></button>
              </div>
              <div *ngIf="crearNuevoC === 0" style="width: 100%; display: flex; justify-content: space-between;">
                <div style="display: flex; position: relative; width: 40%; height: 80px; margin: 0; padding: 0;" class="imgCardAnim">
                  <img [src]="item.url ? item.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; height: 100%; z-index: 1; border-radius: 5px"/>
                </div>

                <div *ngIf="crearNuevoC === 0" style="display: block; position: relative; width: 57%; height: 80px; margin: 0; padding: 0; justify-content: center; align-items: center;">
                  <div class="form__group field">
                    <input type="number" [(ngModel)]="item.series" class="form__field" placeholder="Series" name="Series" id='Series'/>
                    <label for="Series" class="form__label">Series</label>
                  </div>
                  <div class="form__group field" style="margin-top: 12px;">
                    <input type="number" [(ngModel)]="item.reps" class="form__field" placeholder="Reps" name="Reps" id='Reps' required />
                    <label for="Reps" class="form__label">Reps</label>
                  </div>
                </div>
              </div>

              <div *ngIf="crearNuevoC != 0" style="width: 100%; display: flex; justify-content: center;">
                <div style="display: flex; position: relative; width: 100%; height: 80px; margin: 0; padding: 0; z-index: 2; justify-content: center;"> <!-- [class]="{'imgCardAnim':crearNuevoC != 0}" -->
                  <img [src]="item.url ? item.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; max-width: 100px; height: 100%; z-index: 1; border-radius: 5px;"/>
                </div>
              </div>

              <div style="position: relative; bottom: 0; left: 0;">
                <div style="z-index: 2; width: 30px; padding-top: 15px;padding-left: 10px; justify-content: center; align-items: center; height: 30px; border-radius: 0 50px 0 5px; background-color: rgba(61, 173, 39, 0.856); position: absolute; bottom: 0; left: 0;">
                  <span style="color: #ebebeb; font-weight: 900;">{{getNumberExcercise(item)}}</span>
                </div>
              </div>
            </div>

            <!--  EJERCICIO CIRCUIO  -->
            <div *ngIf="item.nombre === 'c1ecu1t029092005' "  [style.opacity]="crearNuevoC != 0 ? 0.5 : 1.0" style="display: block; border-radius: 5px; padding: 15px; width: 190px; height: fit-content; min-height: 120px;" [style.background-color]="item.description">

              <div style="margin-left: 15px; margin-bottom: 15px;">
                <span><strong>Series del circuito</strong></span>
                <div style="display: flex; width: 100%;">
                  <button style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #098d04;" >-</button>
                  <input ngModel [(ngModel)]="item.reps" style="margin-right: 3px; width: 50%; background-color: #ebebeba9; border-width: 0 0 3px 0; " type="number">
                  <button style="border-radius: 8px; color: #ebebeb; border: none; background-color: #098d04;">+</button>
                </div>
              </div>

              <div *ngFor="let ejercicio of isPropertyArray(item), let indiceCir = index" style="width: 200px; height: 120px; border-color: #0c3641;">
                <div style="display: flex;">
                  <span style="width: 100%; margin: 2px;">
                    <div style="position: absolute; top: 0; right: 0;">
                      <div style="z-index: 2; width: 30px; padding-top: 5px;padding-left: 20px; justify-content: center; align-items: center; height: 30px; border-radius: 5px 0px 0px 50px; position: absolute; top: 0; right: 0;" [style.background-color]="item.description">
                        <span style="color: #ffffff;font-weight: 900;">{{getNumberExcercise(item)}}</span>
                      </div>
                    </div>
                    <strong>{{ejercicio.nombre}}</strong>
                  </span>
                  <button [disabled]="crearNuevoC != 0" style="margin-top: 5px;" mat-icon-button matTooltip="Eliminar ejercicio" class="small-button" (click)="deleteExcerciseCir(1,item,indiceCir)"><mat-icon>close</mat-icon></button>
                </div>
                <div style="width: 100%; display: flex; justify-content: end;">
                  <div style="width: 15%; display: block; height: 80px; margin-right: 10px;">
                    <button [disabled]="crearNuevoC != 0" (click)="moverEjerCircu(-1,indiceCir, item)" matTooltip="Subir ejercicio" class="reOrderButonCir"><mat-icon style="color: #ffffff;">arrow_upward</mat-icon></button>
                    <button [disabled]="crearNuevoC != 0" (click)="moverEjerCircu(1,indiceCir, item)" matTooltip="Bajar ejercicio" class="reOrderButonCir"><mat-icon style="color: #ffffff;">arrow_downward</mat-icon></button>
                  </div>
                  <div style="display: flex; position: relative; width: 40%; height: 80px; margin: 0; padding: 0; z-index: 2;" class="imgCardAnim"> <!-- [class]="{'imgCardAnim':crearNuevoC != 0}" -->
                    <img [src]="ejercicio.url ? ejercicio.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; height: 100%; z-index: 1; border-radius: 5px;"/>
                    <div style="position: absolute; bottom: 0; left: 0;">
                      <div style="z-index: 2; width: 30px; padding-top: 15px;padding-left: 10px; justify-content: center; align-items: center; height: 30px; border-radius: 0 50px 0 5px; position: absolute; bottom: 0; left: 0;" [style.background-color]="item.description">
                        <span style="color: #ebebeb;font-weight: 900;">{{indiceCir+1}}</span>
                      </div>
                    </div>
                  </div>

                  <div style="display: block; position: relative; width: 38%; height: 80px; margin-left: 5px; padding: 0; justify-content: center; align-items: center; z-index: 1;">
                    <div class="form__group field" style="margin-top: 12px;">
                      <input [disabled]="crearNuevoC != 0" type="number" [(ngModel)]="ejercicio.reps" class="form__field" placeholder="Reps" name="Reps" id='Reps' required />
                      <label for="Reps" class="form__label">Reps</label>
                    </div>
                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>

        </div>

      </div>
      </div>

    <div class="circuit_button" *ngIf="enoughtLong() && crearNuevoC === 0" style="height: 70px; width: 60px; backdrop-filter: blur(10px); background-color: #98f07ebb; position: absolute; top: 30%; left: -25px; border-radius: 10px 0 0 10px; display: block; justify-content: left; align-items: center;">
      <button mat-button (click)="newCir()" class="circuit_button_icon" style="background-color: #ebebeb00; height: 100%; width: 100%;" matTooltip="Crear circuito" ><mat-icon class="icon" style="font-size: large;">repeat</mat-icon></button>
    </div>

    <span class="containerHijo customScroll" style="margin-left: 15px; width: 300px; padding-left: 20px; padding-right: 20px; padding-bottom: 20px; display: block; overflow-y: auto; position: relative; overflow-x: hidden;">
      <!--<span style="width: 100%;display: flex; position: sticky; top: -20px; height: 30px; background-color: rgb(255, 0, 0); z-index: 2;"></span>-->
      <div style="z-index: 1;">
        <div style="width: 105%; height: 80px;position: sticky; top: 0px; background-color: rgb(255, 255, 255); z-index: 2; padding-top: 20px;">
          <mat-form-field style="width: 95%; height: 80px; background-color: rgb(255, 255, 255); z-index: 3;">
            <mat-label> <mat-icon>search</mat-icon> Buscar ejercicio</mat-label>
            <input matInput (keyup)="applyFilter($event)">
          </mat-form-field>
        </div>

        <div *ngIf="tipos.length <= 1" style="display: block; height: 50px; margin-top: 15px;">
          <span class="alert-info" style="padding: 10px; border-radius: 5px;"> Parece que no hay ejercicios</span>
        </div>
        <div *ngIf="tipos.length <= 1" style="display: block; height: 25px;">
          <span class="alert-info" style="padding: 10px; border-radius: 5px;"> disponibles </span>
        </div>
        <!--
        <button (click)="showList()">gsd</button>
        -->

        <div style="margin-top: 15px; z-index: 1; display: block; position: relative; width: 100%;"  cdkDropList #originList="cdkDropList" [cdkDropListConnectedTo]="[todoList]">

          <mat-spinner *ngIf="tipos.length <= 1" style="margin-left: 45%;" diameter="40"></mat-spinner>


          <div *ngFor="let grupo of tipos; let i = index" >
            <span class="title" *ngIf="i != tipos.length - 1 && grupo.ejercicios.length > 0">{{grupo.name}}</span>
            <div *ngIf="i != tipos.length - 1 && grupo.ejercicios.length > 0" style="height: 130px; display: flex;">

              <span (click)="desplazarAtras(i)" *ngIf="grupo.ejercicios.length > 3" class="buttonSliderForward"><mat-icon style="position: relative; margin-top: 28px; margin-left: 4px;">arrow_back_ios</mat-icon></span>

              <div cdkDropList (cdkDropListDropped)="onDropSource($event, i)" [cdkDropListData]="grupo.ejercicios"  style="width: 295px; display: flex;">
                <div cdkDrag [ngClass]="{'slide-left': slideLeft.estado && slideLeft.i === i, 'slide-right': slideRight.estado && slideRight.i === i}"
                *ngFor="let ejercicio of grupo.ejercicios; let o = index" style="margin-top: 15px; height: 90px; position: relative; width: 85px;">
                  <div *ngIf="o <= 2 || (slideLeft.estado && slideLeft.i === i) || (slideRight.estado && slideRight.i === i)" style="width: 85px;">
                    <img [src]="ejercicio.url ? ejercicio.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="height: 85px; width: 85px; border-radius: 10px; margin: 5px; position: relative; top: 0; right: 0;">
                    <span class="titleEjer" >{{ejercicio.nombre}}</span>
                  </div>
                </div>

              </div>

              <span (click)="desplazarEnfrente(i)" *ngIf="grupo.ejercicios.length > 3" class="buttonSliderBack"><mat-icon style="position: relative; margin-top: 28px; margin-left: 0px;">arrow_forward_ios</mat-icon></span>

            </div>
          </div>

        </div>
      </div>

      <div *ngIf="crearNuevoC != 0" style="z-index: 2; width: 100%; height: 100%; position: absolute;top: 0; left: 0; display: flex; justify-content: flex-start; align-items: center; background-color: rgb(246, 255, 246); padding: 15px;">
        <span *ngIf="crearNuevoC <= 2" style="position: fixed; padding: 12px; font-size: x-large; margin-top: -150px; border-radius: 5px; border-color: #0c4128;" class="alert-success">Seleciona al menos dos</span>
        <span *ngIf="crearNuevoC <= 2" style="position: fixed; padding: 12px; font-size: x-large; margin-top: -50px; border-radius: 5px; border-color: #0c4128;" class="alert-success"> ejercicios para comenzar</span>
        <span *ngIf="crearNuevoC <= 2" style="position: fixed; padding: 12px; font-size: x-large; margin-top: 50px; border-radius: 5px; border-color: #0c4128;" class="alert-success"> tu circuito</span>
        <span *ngIf="crearNuevoC > 2" style="position: fixed; padding: 12px; font-size: x-large; margin-top: -150px; border-radius: 5px; border-color: #0c4128;" class="alert-success">Puedes agregar mas</span>
        <span *ngIf="crearNuevoC > 2" style="position: fixed; padding: 12px; font-size: x-large; margin-top: -50px; border-radius: 5px; border-color: #0c4128;" class="alert-success"> ejercicios o cerrar el</span>
        <span *ngIf="crearNuevoC > 2" style="position: fixed; padding: 12px; font-size: x-large; margin-top: 50px; border-radius: 5px; border-color: #0c4128;" class="alert-success"> circuito</span>
        <span *ngIf="crearNuevoC >= 1" (click)="cancelNewCir()" style="position: fixed; padding: 12px; font-size: medium; margin-top: 200px; border-radius: 5px; border-color: #410c0c; color: #410c0c; background-color: #e04747;"> Cancelar </span>
        <span *ngIf="crearNuevoC > 2" (click)="aceptarNewCir()" style="position: fixed; padding: 12px; font-size: medium; margin-top: 200px; margin-left: 200px; border-radius: 5px; border-color: #0c3641; color: #f7f7f7; background-color: #47d6e0;"> Aceptar </span>
      </div>

    </span>
  </div>

</div>

<div style="height: 100%; width: 100%;" *ngIf="isSmallScreen">
  <div *ngIf="error.e" [class]="error.e ? 'errorMsg' : 'errorMsgClose' " style="z-index: 1000; background-color: #fc3737ad; width: 90%; min-height: 35px; padding-bottom: 10px; height: fit-content; border-radius: 10px ; position: fixed; top: 10px; left: 5px; justify-content: start; align-items: center; padding-left: 15px; padding-top: 10px;">
    <span style="color: #f7f7f7; font-weight: 500; font-size: large;">{{error.msg}}</span>
  </div>
  <form [formGroup]="form" (ngSubmit)="ingresar()" style="display: block; justify-content: start; height: 100%; align-items: center; width: 95%;">
<!--
    <mat-form-field style="width: 100%;">
      <mat-label>Nombre de la rutina</mat-label>
      <input type="text" autofocus matInput formControlName="nombre">
    </mat-form-field>

    <mat-form-field style="width: 100%;" *ngIf="form.get('grupoMuscular')?.value.name !== 'Agregar'">
      <mat-label style="font-size: small;">Grupo Muscular</mat-label>
      <mat-select formControlName="grupoMuscular" name="grupoMuscular">
        <mat-option *ngFor="let m of tiposConfirmattion" [value]="m">{{m.name}}</mat-option>
      </mat-select>
  </mat-form-field>

  <mat-form-field style="width: 100%; " *ngIf="form.get('grupoMuscular')?.value.name === 'Agregar' ">
    <mat-label style="font-size: small;">Nuevo Grupo Muscular</mat-label>
    <div style="display: flex; align-items: start; width: 100%;">
      <mat-label style="font-size: small;"></mat-label>
      <button mat-icon-button (click)="cancelarConvenio()" class="butonClose">
        <mat-icon>clear</mat-icon>
      </button>
    </div>
    <input matInput formControlName="newgrupoMuscular" type="text" name="newgrupoMuscular">
  </mat-form-field>
-->
  </form>

  <div style="width: 100%; display: flex; justify-content: space-around; align-items:center;">
    <div style="display: block; width: 40px;" *ngIf="todo.length >= 1 && crearNuevoC === 0 && !deletingMode">
      <button class="deleteElementExercise" matTooltip="Eliminar ejercicio" color="secondary" type="button" (click)="deletingMode = true" style="margin-top: 10px;"><mat-icon>close</mat-icon></button>
      <label style="font-size: small; margin-top: 15px; color: rgb(172, 172, 172);">Eliminar ejercicio</label>
    </div>
    <div style="display: block; width: 40px;" *ngIf="todo.length >= 1 && crearNuevoC === 0 && deletingMode">
      <button class="deleteElementExercise" matTooltip="Eliminar ejercicio" color="secondary" type="button" (click)="deleteListDeleting()" style="margin-top: 10px;"><mat-icon>close</mat-icon></button>
      <label style="font-size: small; margin-top: 15px; color: rgb(172, 172, 172);">Seleccione ejercicio(s) a eliminar</label>
    </div>
    <div style="display: block; width: 40px;" *ngIf="crearNuevoC === 0 && !deletingMode">
      <button class="addbutton" matTooltip="Añadir ejercicio" color="secondary" (click)="openDialogAddExcercise()" style="margin-top: 10px;" >+</button>
      <label style="font-size: small; color: rgb(172, 172, 172);">Añadir ejercicio</label>
    </div>
    <div style="display: block; width: 40px;" *ngIf="todo.length >= 1 && crearNuevoC === 0 && !deletingMode">
      <button class="acceptButton" matTooltip="Crear rutina" color="secondary" type="submit" (click)="ingresar()"><mat-icon>check</mat-icon></button>
      <label style="font-size: small; margin-top: 15px; color: rgb(172, 172, 172);">Aceptar</label>
    </div>
  </div>


  <div style="width: 100%; border-radius: 8px; margin-top: 20px; height: 100%; background-color: #f0f0f0c7; padding-top: 15px; padding-bottom: 15px; margin-bottom: 30px;">

    <div style="margin-top: 15px; margin-bottom: 20px;">

      <div *ngIf="todo.length <= 0" style="width: 100%; display: flex; justify-content: center;">
        <div style="width: 80px; height: fit-content; display: block;">
          <img src='/assets/img/flecha_arriba.png' alt="Imagen del ejercicio" style="width: 80px; margin-left: -15px; margin-bottom: 15px; z-index: 1; border-radius: 8px; opacity: 0.5; rotate: -30deg;" />
          <span style="color: #6e6c6ccc; display: inline-block; margin-right: auto;">Presiona el botón para agregar ejercicios</span>
        </div>
      </div>

      <div *ngFor="let item of todo" (click)="checkNewCircuitoMobil(item)" [class]="findItemCirtuico(item)? 'selectedCardMobil': 'simpleCardMobil'">
        <div class="exercise-column" [class]="findItemDeletingList(item)? 'deletingModeClass' : '' " style="width: 90%; height: 100%; margin-left: 5%; display: flex; justify-content: space-between; align-items: center; background-color: #e5f0f3b2; border-radius: 8px;">

          <!-- ELEMENTO NO CIRUITO -->
          <div *ngIf="todo.length > 0 && item.nombre != 'c1ecu1t029092005' " style="width: 100%; display: flex;" >
            <div style="width: 18%;">
              <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="subirEjercicioMobile(item)" matTooltip="Subir ejercicio" style="margin-left: 5px;" class="reOrderButonCir"><mat-icon style=" color: #ffffff;">arrow_upward</mat-icon></button>
              <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="bajarEjercicioMobile(item)" matTooltip="Bajar ejercicio" style="margin-left: 5px;" class="reOrderButonCir"><mat-icon style=" color: #ffffff;">arrow_downward</mat-icon></button>
            </div>

            <div style="width: 80%; display: flex;">
              <div style="display: flex; width: 40%; height: 80px; margin-left: 10px; margin-bottom: 10px; margin-top: 10px; padding: 0; z-index: 2;" class="imgCardAnim">
                <img [src]="item.url? item.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; height: 100%; z-index: 1; border-radius: 8px;" />
              </div>

              <div style="display: block; margin-left: 20px; margin-bottom: 10px; margin-top: 10px; width: 60%;">
                <span style="width: 100%; font-size: medium;word-wrap: break-word; line-height: 1.5rem;">
                  <strong>
                    {{item.nombre}}
                  </strong>
                </span>

                <span>Series</span>
                <div style="display: flex; width: 100%;">
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="+item.series = addToExercise(+item.series!,-1)" style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #04728d;" >-</button>
                  <input [disabled]="crearNuevoC != 0 || deletingMode" ngModel [(ngModel)]="item.series" style="margin-right: 3px; width: 50%; background-color: #ebebeba9; border-width: 0 0 3px 0; " type="number">
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="+item.series = addToExercise(+item.series!,1)" style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #04728d;" >+</button>
                </div>
                <span>Repeticiones</span>
                <div style="display: flex; width: 100%;">
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="item.reps = addToExercise(item.reps,-1)" style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #04728d;" >-</button>
                  <input [disabled]="crearNuevoC != 0 || deletingMode" ngModel [(ngModel)]="item.reps" style="margin-right: 3px; width: 50%; background-color: #ebebeba9; border-width: 0 0 3px 0; " type="number">
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="item.reps = addToExercise(item.reps,1)" style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #04728d;" >+</button>
                </div>
              </div>
            </div>
          </div>

          <!-- ELEMENTO CIRUITO -->
          <div *ngIf="todo.length > 0 && item.nombre === 'c1ecu1t029092005' " [style.opacity]="crearNuevoC != 0 ? 0.5 : 1.0" style="width: 100%; display: flex; padding-top: 10px; padding-bottom: 10px; border-radius: 8px;" [style.background-color]="item.description" >

            <div style="width: 18%;">
              <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="subirEjercicioMobile(item)" matTooltip="Subir ejercicio" style="margin-left: 5px;" class="reOrderButonCir"><mat-icon style=" color: #ffffff;">arrow_upward</mat-icon></button>
              <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="bajarEjercicioMobile(item)" matTooltip="Bajar ejercicio" style="margin-left: 5px;" class="reOrderButonCir"><mat-icon style=" color: #ffffff;">arrow_downward</mat-icon></button>
            </div>

            <div style="display: block; width: 80%;">

              <div style="margin-left: 15px; margin-bottom: 15px;">
                <span><strong>Series del circuito</strong></span>
                <div style="display: flex; width: 100%;">
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="item.reps = addToExercise(item.reps,-1)" style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #04728d;" >-</button>
                  <input [disabled]="crearNuevoC != 0 || deletingMode" ngModel [(ngModel)]="item.reps" style="margin-right: 3px; width: 50%; background-color: #ebebeba9; border-width: 0 0 3px 0; " type="number">
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="item.reps = addToExercise(item.reps,1)" style="border-radius: 8px; color: #ebebeb; border: none; background-color: #04728d;">+</button>
                </div>
              </div>

              <div style="width: 100%; display: flex; margin-bottom: 15px;" *ngFor="let ejerCir of isPropertyArray(item); let indiceCir = index" [style.background-color]="item.description">

                <div style="width: 80%; display: flex;">
                  <div style="display: flex; width: 40%; height: 80px; margin-left: 10px; margin-bottom: 10px; margin-top: 10px; padding: 0; z-index: 2;" class="imgCardAnim">
                    <img [src]="ejerCir.url? ejerCir.url : '/assets/img/no_photo.jpg'" alt="Imagen del ejercicio" style="width: 100%; height: 100%; z-index: 1; border-radius: 8px;" />
                  </div>

                  <div style="display: block; margin-left: 20px; margin-bottom: 10px; margin-top: 10px; width: 60%;">
                    <span style="width: 100%; font-size: medium;word-wrap: break-word; line-height: 1.5rem;">
                      <strong>
                        {{ejerCir.nombre}}
                      </strong>
                    </span>

                    <span>Repeticiones</span>
                    <div style="display: flex; width: 100%;">
                      <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="ejerCir.reps = addToExercise(item.reps,-1)" style="margin-right: 3px; border-radius: 8px; border: none; color: #ebebeb; background-color: #04728d;" >-</button>
                      <input [disabled]="crearNuevoC != 0 || deletingMode" ngModel [(ngModel)]="ejerCir.reps" style="margin-right: 3px; width: 50%; background-color: #ebebeba9; border-width: 0 0 3px 0; " type="number">
                      <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="ejerCir.reps = addToExercise(item.reps,1)" style="border-radius: 8px; color: #ebebeb; border: none; background-color: #04728d;">+</button>
                    </div>
                  </div>
                </div>

                <div style="width: 18%;">
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="moverEjerCircu(-1,indiceCir, item)" matTooltip="Subir ejercicio" style="margin-left: 5px;" class="reOrderButonCir"><mat-icon style=" color: #ffffff;">arrow_upward</mat-icon></button>
                  <button [disabled]="crearNuevoC != 0 || deletingMode" (click)="moverEjerCircu(1,indiceCir, item)" matTooltip="Bajar ejercicio" style="margin-left: 5px;" class="reOrderButonCir"><mat-icon style=" color: #ffffff;">arrow_downward</mat-icon></button>
                </div>

              </div>

            </div>


          </div>

        </div>
      </div>

    </div>

    <div style="position: fixed; bottom: 50px; right: 10px; justify-content: center; align-items: center; background-color: #ebebeb; border-radius: 10px; z-index: 1002; height: 100px; width: 90px;" *ngIf="enoughtLong() && crearNuevoC === 0 && !deletingMode">
      <div class="ciruitButnMobil"  style="height: 70px; width: 60px; backdrop-filter: blur(10px); background-color: #98f07ebb;  border-radius: 10px ; margin-left: 17px; margin-top: 15px; display: block; justify-content: left; align-items: center;">
        <button mat-button (click)="newCir()" class="circuit_button_icon" style="background-color: #ebebeb00; height: 100%; width: 100%;" matTooltip="Crear circuito" ><mat-icon class="icon" style="font-size: large;">repeat</mat-icon></button>
      </div>
    </div>

    <div style="position: fixed; bottom: 50px; right: 10px; justify-content: center; align-items: center; background-color: #ebebeb; border-radius: 10px; z-index: 1002; height: 100px; width: 90px;" *ngIf="todo.length >= 2 && crearNuevoC > 0 && !deletingMode">
      <div class="ciruitButnMobil"  style="height: 70px; width: 60px; backdrop-filter: blur(10px); background-color: #f07e7ebb;  border-radius: 10px ; margin-left: 17px; margin-top: 15px; display: block; justify-content: left; align-items: center;">
        <button mat-button (click)="cancelNewCir()" class="circuit_button_icon" style="background-color: #ebebeb00; height: 100%; width: 100%;" matTooltip="Cancelar" ><mat-icon class="icon" style="font-size: large;">close</mat-icon></button>
      </div>
    </div>

    <div style="position: fixed; bottom: 50px; left: 0; justify-content: center; align-items: center; background-color: #ebebeb; border-radius: 10px; z-index: 1002; height: 100px; width: 90px;" *ngIf="todo.length >= 2 && crearNuevoC > 2 && !deletingMode">
      <div class="ciruitButnMobil"  style="height: 70px; width: 60px; backdrop-filter: blur(10px); background-color: #a2f07ec9;  border-radius: 10px ; margin-left: 17px; margin-top: 15px; display: block; justify-content: left; align-items: center;">
        <button mat-button (click)="aceptarNewCir()" class="circuit_button_icon" style="background-color: #ebebeb00; height: 100%; width: 100%;" matTooltip="Cancelar" ><mat-icon class="icon" style="font-size: large;">done</mat-icon></button>
      </div>
    </div>

  </div>
</div>
